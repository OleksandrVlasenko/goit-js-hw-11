{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,4EASA,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAYF,SAASC,cAAc,YACnCE,EAAcH,SAASC,cAAc,cAE3C,IAAIG,EAAa,EAEjB,MAAMC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,MAMVC,EAAU,CACdC,OAAQ,CACNC,IALa,qCAMbC,EAAG,GACHC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,KAAM,EACNC,SAAU,KAkEdC,eAAeC,EAAOC,GACpB,aAAaxB,EAAAyB,QAAMC,QAAQF,E,CAG7B,SAASG,EAAeC,GACtBrB,GAAcqB,EAAKC,KAAKC,OAEpBvB,IAAeqB,EAAKG,YACtBzB,EAAY0B,MAAMC,QAAU,OAC5BxB,EAAAyB,GAASC,OAAOC,QACd,8D,CAKN,SAASC,EAAiBC,GACxBjC,EAAUkC,mBAAmB,aAAa,EAAAC,EAAAf,SAAaa,G,CAGzD,SAASG,IACPpC,EAAUqC,UAAY,E,CAlFxB1C,EAAAyB,QAAMkB,SAASC,QAdE,2BAejB5C,EAAAyB,QAAMkB,SAASE,QAAU,IAEzB3C,EAAK4C,iBAAiB,UAGtB,SAAsBC,GACpBA,EAAEC,iBA+EFC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,WA7EZ9C,EAAY0B,MAAMC,QAAU,OAE5BpB,EAAQC,OAAOE,EAAId,EAAKmD,SAASC,YAAYC,MAAMC,OACnD3C,EAAQC,OAAOM,KAAO,EACtBb,EAAa,EAEb,IACEgB,EAAOV,GAAS4C,MAAKC,IACnB,GAA2B,IAAvBA,EAAE9B,KAAKC,KAAKC,OAMd,OALAW,SAEAhC,EAAAyB,GAASC,OAAOwB,QACd,4EAIJlD,EAAAyB,GAASC,OAAOyB,QAAQ,oBAAoBF,EAAE9B,KAAKG,qBAEnDU,IAEAJ,EAAiBqB,EAAE9B,KAAKC,MAExBvB,EAAY0B,MAAMC,QAAU,QAE5BN,EAAe+B,EAAE9B,MAEjBpB,EAASqD,SAAS,G,CAIpB,MAAOC,GACPC,QAAQD,MAAMA,E,KAtClBxD,EAAYwC,iBAAiB,SA0C7B,WACE,IACEjC,EAAQC,OAAOM,MAAQ,EAEvBG,EAAOV,GAAS4C,MAAKC,IACnBrB,EAAiBqB,EAAE9B,KAAKC,MAExBF,EAAe+B,EAAE9B,MAEjBpB,EAASqD,SAAS,G,CAEpB,MAAOC,GACPC,QAAQD,MAAMA,E","sources":["src/js/with-btn-load-more.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\nimport 'notiflix/dist/notiflix-3.2.6.min.js';\nimport galleryItems from '../templates/gallery-items.hbs';\n\nconst form = document.querySelector('#search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet countOfImg = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst AUTH_KEY = '35003886-1d9d7f8458bd91da816cc357a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst options = {\n  params: {\n    key: AUTH_KEY,\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: 1,\n    per_page: 40,\n  },\n};\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.timeout = 1000;\n\nform.addEventListener('submit', onSearchImgs);\nloadMoreBtn.addEventListener('click', onLoadMoreImgs);\n\nfunction onSearchImgs(e) {\n  e.preventDefault();\n\n  scrollToStart();\n\n  loadMoreBtn.style.display = 'none';\n\n  options.params.q = form.elements.searchQuery.value.trim();\n  options.params.page = 1;\n  countOfImg = 0;\n\n  try {\n    getImg(options).then(r => {\n      if (r.data.hits.length === 0) {\n        clearGallery();\n\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n      Notiflix.Notify.success(`Hooray! We found ${r.data.totalHits} images.`);\n\n      clearGallery();\n\n      addImgsToGallery(r.data.hits);\n\n      loadMoreBtn.style.display = 'block';\n\n      addCountOfImgs(r.data);\n\n      lightbox.refresh();\n\n      \n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction onLoadMoreImgs() {\n  try {\n    options.params.page += 1;\n\n    getImg(options).then(r => {\n      addImgsToGallery(r.data.hits);\n\n      addCountOfImgs(r.data);\n\n      lightbox.refresh();\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function getImg(options) {\n  return await axios.request(options);\n}\n\nfunction addCountOfImgs(data) {\n  countOfImg += data.hits.length;\n\n  if (countOfImg === data.totalHits) {\n    loadMoreBtn.style.display = 'none';\n    Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n\nfunction addImgsToGallery(arrayOfImgs) {\n  galleryEl.insertAdjacentHTML('beforeend', galleryItems(arrayOfImgs));\n}\n\nfunction clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nfunction scrollToStart() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$2shzp","parcelRequire","$89594de34827ac7b$var$form","document","querySelector","$89594de34827ac7b$var$galleryEl","$89594de34827ac7b$var$loadMoreBtn","$89594de34827ac7b$var$countOfImg","$89594de34827ac7b$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","$89594de34827ac7b$var$options","params","key","q","image_type","orientation","safesearch","page","per_page","async","$89594de34827ac7b$var$getImg","options1","default","request","$89594de34827ac7b$var$addCountOfImgs","data","hits","length","totalHits","style","display","$7Y9D8","Notify","warning","$89594de34827ac7b$var$addImgsToGallery","arrayOfImgs","insertAdjacentHTML","$1sfr8","$89594de34827ac7b$var$clearGallery","innerHTML","defaults","baseURL","timeout","addEventListener","e","preventDefault","window","scrollTo","top","behavior","elements","searchQuery","value","trim","then","r","failure","success","refresh","error","console"],"version":3,"file":"with-btn-load-more.60bde953.js.map"}