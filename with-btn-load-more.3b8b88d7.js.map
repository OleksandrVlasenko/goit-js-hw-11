{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,sGASMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAYF,SAASC,cAAc,YACnCE,EAAcH,SAASC,cAAc,cAEvCG,EAAa,EAEXC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,MAMVC,EAAU,CACdC,OAAQ,CACNC,IALa,qCAMbC,EAAG,GACHC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,KAAM,EACNC,SAAU,K,SAgECC,EAAOC,G,OAAPC,EAAMC,MAAAC,KAAAC,U,UAANH,I,OAAAA,EAAff,EAAAT,EAAA,CAAAS,EAAAmB,GAAAC,MAAA,SAAAC,EAAsBP,G,kFACPQ,EAAAC,QAAMC,QAAQV,G,oFADRE,MAAAC,KAAAC,U,CAIrB,SAASO,EAAeC,IACtB5B,GAAc4B,EAAKC,KAAKC,UAELF,EAAKG,YACtBhC,EAAYiC,MAAMC,QAAU,OAC5B/B,EAAAgC,GAASC,OAAOC,QACd,8D,CAKN,SAASC,EAAiBC,GACxBxC,EAAUyC,mBAAmB,aAAa,EAAAC,EAAAf,SAAaa,G,CAGzD,SAASG,IACP3C,EAAU4C,UAAY,E,CAhFxBlB,EAAAC,QAAMkB,SAASC,QAdE,2BAejBpB,EAAAC,QAAMkB,SAASE,QAAU,IAEzBlD,EAAKmD,iBAAiB,UAGtB,SAAsBC,GACpBA,EAAEC,iBA6EFC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,WA3EZrD,EAAYiC,MAAMC,QAAU,OAE5B3B,EAAQC,OAAOE,EAAId,EAAK0D,SAASC,YAAYC,MAAMC,OACnDlD,EAAQC,OAAOM,KAAO,EACtBb,EAAa,EAEb,IACEe,EAAOT,GAASmD,MAAK,SAAAC,GACnB,GAA2B,IAAvBA,EAAE9B,KAAKC,KAAKC,OAMd,OALAW,SAEAvC,EAAAgC,GAASC,OAAOwB,QACd,4EAIJzD,EAAAgC,GAASC,OAAOyB,QAAQ,oBAAqCC,OAAjBH,EAAE9B,KAAKG,UAAU,aAE7DU,IAEAJ,EAAiBqB,EAAE9B,KAAKC,MAExBF,EAAe+B,EAAE9B,MAEjB3B,EAAS6D,UAET/D,EAAYiC,MAAMC,QAAU,O,IAE9B,MAAO8B,GACPC,QAAQD,MAAMA,E,KApClBhE,EAAY+C,iBAAiB,SAwC7B,WACE,IACExC,EAAQC,OAAOM,MAAQ,EAEvBE,EAAOT,GAASmD,MAAK,SAAAC,GACnBrB,EAAiBqB,EAAE9B,KAAKC,MAExBF,EAAe+B,EAAE9B,MAEjB3B,EAAS6D,S,IAEX,MAAOC,GACPC,QAAQD,MAAMA,E","sources":["src/js/with-btn-load-more.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\nimport 'notiflix/dist/notiflix-3.2.6.min.js';\nimport galleryItems from '../templates/gallery-items.hbs';\n\nconst form = document.querySelector('#search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet countOfImg = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst AUTH_KEY = '35003886-1d9d7f8458bd91da816cc357a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst options = {\n  params: {\n    key: AUTH_KEY,\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: 1,\n    per_page: 40,\n  },\n};\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.timeout = 1000;\n\nform.addEventListener('submit', onSearchImgs);\nloadMoreBtn.addEventListener('click', onLoadMoreImgs);\n\nfunction onSearchImgs(e) {\n  e.preventDefault();\n\n  scrollToStart();\n\n  loadMoreBtn.style.display = 'none';\n\n  options.params.q = form.elements.searchQuery.value.trim();\n  options.params.page = 1;\n  countOfImg = 0;\n\n  try {\n    getImg(options).then(r => {\n      if (r.data.hits.length === 0) {\n        clearGallery();\n\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n      Notiflix.Notify.success(`Hooray! We found ${r.data.totalHits} images.`);\n\n      clearGallery();\n\n      addImgsToGallery(r.data.hits);\n\n      addCountOfImgs(r.data);\n\n      lightbox.refresh();\n\n      loadMoreBtn.style.display = 'block';\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction onLoadMoreImgs() {\n  try {\n    options.params.page += 1;\n\n    getImg(options).then(r => {\n      addImgsToGallery(r.data.hits);\n\n      addCountOfImgs(r.data);\n\n      lightbox.refresh();\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function getImg(options) {\n  return await axios.request(options);\n}\n\nfunction addCountOfImgs(data) {\n  countOfImg += data.hits.length;\n\n  if (countOfImg === data.totalHits) {\n    loadMoreBtn.style.display = 'none';\n    Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n\nfunction addImgsToGallery(arrayOfImgs) {\n  galleryEl.insertAdjacentHTML('beforeend', galleryItems(arrayOfImgs));\n}\n\nfunction clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nfunction scrollToStart() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$e5aef573c5c4710d$var$form","document","querySelector","$e5aef573c5c4710d$var$galleryEl","$e5aef573c5c4710d$var$loadMoreBtn","$e5aef573c5c4710d$var$countOfImg","$e5aef573c5c4710d$var$lightbox","$parcel$interopDefault","$5IjG7","captionsData","captionDelay","$e5aef573c5c4710d$var$options","params","key","q","image_type","orientation","safesearch","page","per_page","$e5aef573c5c4710d$var$getImg","options1","$e5aef573c5c4710d$var$_getImg","apply","this","arguments","$2TvXO","mark","_callee","$dIxxU","default","request","$e5aef573c5c4710d$var$addCountOfImgs","data","hits","length","totalHits","style","display","$6JpON","Notify","warning","$e5aef573c5c4710d$var$addImgsToGallery","arrayOfImgs","insertAdjacentHTML","$kghDM","$e5aef573c5c4710d$var$clearGallery","innerHTML","defaults","baseURL","timeout","addEventListener","e","preventDefault","window","scrollTo","top","behavior","elements","searchQuery","value","trim","then","r","failure","success","concat","refresh","error","console"],"version":3,"file":"with-btn-load-more.3b8b88d7.js.map"}